DROP SCHEMA

IF EXISTS hr;
	CREATE SCHEMA hr COLLATE = utf8_general_ci;

USE hr;

/* *************************************************************** 
***************************CREATING TABLES************************
**************************************************************** */

CREATE TABLE users(
	idUser INT UNSIGNED NOT NULL,
	password VARCHAR(30),
	email VARCHAR(30),
	PRIMARY KEY (idUser)
);

CREATE TABLE profiles(
	idProfile INT UNSIGNED NOT NULL,
	idUser INT,
	name VARCHAR(30),
	lastname VARCHAR(30),
	age INT,
	telephoneNumber VARCHAR(15),
	PRIMARY KEY (idProfile),
	CONSTRAINT constraint_profiles_idUser FOREIGN KEY (idUser) REFERENCES users(idUser)
);

CREATE TABLE event_type(
	idType INT UNSIGNED NOT NULL,
	description VARCHAR(50),
	PRIMARY KEY (idType)
);

CREATE TABLE seats(
	idSeat INT UNSIGNED NOT NULL,
	numberSeat INT,
	rowSeat CHAR(1),
	stateSeat CHAR(1),
	PRIMARY KEY (idSeat)
);

CREATE TABLE events (
	idEvent INT UNSIGNED NOT NULL,
	idType INT,
	idSeat INT,
	name VARCHAR(60),
	dateEvent DATE,
	address VARCHAR(60),
	PRIMARY KEY (idEvent),
	CONSTRAINT constraint_events_idType FOREIGN KEY (idType) REFERENCES event_type(idType),
	CONSTRAINT constraint_events_idSeat FOREIGN KEY (idSeat) REFERENCES seats(idSeat)
);

CREATE TABLE reservations (
	idReserve INT UNSIGNED NOT NULL,
	idEvent INT,
	idUser INT,
	PRIMARY KEY (idReserve),
	CONSTRAINT constraint_reservations_idEvent FOREIGN KEY (idEvent) REFERENCES events(idEvent)
);

COMMIT;